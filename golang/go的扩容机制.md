# go slice扩容机制

**go 1.18**不在以1024作为临界点，而是设置了一个值为**256**的**threshold**，超过这个临界点，不再是每次扩容1/4，而是每次增加（旧容量+3*256)/4

- 当新切片需要的容量大于两倍扩容的容量，则直接按照新切片需要的容量扩容
- 当原容量 < threshold ，新slice的容量扩容为原来的2倍
- 当原容量 > threshold, 新slice的容量增加（原容量+3*256）/4